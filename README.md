# autodomd - Auto-Generated Todo System in Rust

[![CI](https://github.com/Trahloc/autodomd/actions/workflows/ci.yml/badge.svg)](https://github.com/Trahloc/autodomd/actions/workflows/ci.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

An automated TODO management system written in Rust following the r2026t microcrate convention. This tool scans your codebase for TODO comments and markdown task files, then generates a comprehensive `TODO.md` file.

## ⚠️ Important Workflow Rule

**DO NOT MANUALLY EDIT `TODO.md`**.
This file is auto-generated by the autodomd tool. Any manual changes will be overwritten on the next run.

## Architecture

This project follows the **rust-2026-Trahloc Microcrate Convention (r2026t)** for optimal compilation speed and AI-agent compatibility:

```
autodomd/
├── Cargo.toml               # workspace root
├── bin/                     # binary crate
├── command/                 # CLI command microcrates
├── library/                 # shared library microcrates
├── tests/                   # integration tests
└── docs/                    # documentation
```

## Installation

### Prerequisites
- Rust 1.70+ (2021 edition)
- Cargo

### Build from Source
```bash
git clone https://github.com/Trahloc/autodomd.git
cd autodomd
cargo build --release
```

### Install Globally
```bash
cargo install --git https://github.com/Trahloc/autodomd.git
```

## Usage

### Initialize Project
```bash
autodomd init
```

### Scan and Generate TODO.md
```bash
autodomd scan
autodomd generate
```

### Combined Workflow
```bash
autodomd scan && autodomd generate
```

## How to Add Tasks

### 1. Technical/Code Tasks (Inline Comments)

For tasks directly related to specific lines of code, use TODO comments in your source files:

**Format:** `// TODO(Category): Description`

**Examples:**
```rust
// TODO(Auth): Add JWT token validation here
// TODO(UI): Fix alignment on mobile devices
```

**Supported Languages:**
- Rust (`// TODO:`)
- JavaScript/TypeScript (`// TODO:`, `/* TODO: */`)
- Python (`# TODO:`)
- And more...

### 2. Planning/Architectural Tasks (Markdown Files)

For larger tasks, user stories, or planning items not tied to specific code, create markdown files in the `todo/` directory:

**Location:** `todo/*.md` or `todo/**/*.md` (subdirectories supported)

**Naming:** Use descriptive filenames (e.g., `feat-login.md`, `refactor-auth.md`)

**Format:** The first H1 header becomes the task title:

```markdown
# Implement Login Page Flow

- Design the UI mockups
- Implement authentication logic
- Add form validation
- Connect to API endpoints
```

## How It Works

1. **Scanning Phase**: Searches for TODO comments in source files and task definitions in markdown files
2. **Parsing Phase**: Extracts and categorizes TODO items and tasks
3. **Generation Phase**: Creates a comprehensive `TODO.md` with links to source locations

## Development

### Project Structure

- `bin/` - Main binary crate
- `command/` - CLI subcommand implementations
- `library/` - Core functionality (scanner, parser, generator, common utilities)
- `tests/` - Integration tests

### Building

```bash
# Debug build
cargo build

# Release build
cargo build --release

# Run tests
cargo test

# Run clippy lints
cargo clippy

# Format code
cargo fmt
```

### Microcrate Philosophy

Following r2026t principles:
- Each logical component is a separate microcrate
- Flattened structure (no `src/` in libraries)
- Explicit naming (no `lib.rs`, `main.rs`, or `mod.rs`)
- Fast incremental compilation via strict boundaries

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests: `cargo test`
5. Check formatting: `cargo fmt --check`
6. Run lints: `cargo clippy`
7. Submit a pull request

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Related

- [r2026t Specification](docs/rust-2025-trahloc.md) - The microcrate convention this project follows